<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>infinitest · 极测无界 | 车载测试库文档</title>
  <style>
    :root {
      --primary-color: #3498db;
      --secondary-color: #2c3e50;
      --accent-color: #16a085;
      --light-bg: #f8f9fa;
      --card-shadow: 0 4px 12px rgba(0,0,0,0.1);
      --code-bg: #f5f5f5;
    }
    body {
      font-family: 'Microsoft YaHei', 'PingFang SC', sans-serif;
      line-height: 1.8;
      color: #333;
      background-color: var(--light-bg);
      max-width: 1100px;
      margin: 0 auto;
      padding: 20px;
    }

    .navbar {
      background-color: rgba(255, 255, 255, 0.8);
      backdrop-filter: blur(20px);
      -webkit-backdrop-filter: blur(20px);
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      height: 44px;
      padding: 0 22px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      z-index: 999;
      border-bottom: 1px solid rgba(0, 0, 0, 0.1);
    }

    .nav-logo {
      font-size: 21px;
      font-weight: 500;
      color: var(--apple-black);
      text-decoration: none;
    }

    .nav-links {
      display: flex;
      gap: 30px;
      align-items: center;
    }

    .nav-link {
      color: var(--apple-black);
      text-decoration: none;
      font-size: 14px;
      font-weight: 400;
      transition: opacity 0.3s;
    }

    .nav-link:hover {
      opacity: 0.7;
    }

    .nav-dropdown {
      position: relative;
      display: flex;
      align-items: center;
    }

    .dropdown-menu {
      position: absolute;
      top: 100%;
      left: 0;
      background-color: rgba(255, 255, 255, 0.9);
      backdrop-filter: blur(20px);
      -webkit-backdrop-filter: blur(20px);
      border-radius: 8px;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
      padding: 8px 0;
      min-width: 160px;
      opacity: 0;
      visibility: hidden;
      transition: opacity 0.3s, visibility 0.3s;
    }

    .dropdown-item {
      display: block;
      padding: 8px 16px;
      color: var(--apple-black);
      text-decoration: none;
      font-size: 14px;
      transition: background-color 0.3s;
    }

    .dropdown-item:hover {
      background-color: var(--apple-light-gray);
    }

    .nav-dropdown:hover .dropdown-menu {
      opacity: 1;
      visibility: visible;
    }

    .relation-graph {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 20px;
      margin: 40px 0;
    }

    .relation-node {
      background: linear-gradient(135deg, #007bff, #00bfff);
      color: white;
      padding: 20px 30px;
      border-radius: 15px;
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
      transition: all 0.3s ease;
      cursor: pointer;
      text-align: center;
      min-width: 150px;
    }

    .relation-node:hover {
      transform: translateY(-5px);
      box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3);
    }

    .relation-node.project {
      background: linear-gradient(135deg, #28a745, #20c997);
      font-size: 1.5em;
      font-weight: bold;
      padding: 30px 40px;
    }

    .relation-container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 20px;
      background: white;
      border-radius: 15px;
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
    }

    .relation-title {
      text-align: center;
      font-size: 2em;
      color: #333;
      margin-bottom: 30px;
      font-weight: bold;
    }


    h1 {
      color: var(--secondary-color);
      text-align: center;
      padding: 20px 0;
      border-bottom: 3px solid var(--primary-color);
      margin-bottom: 30px;
      font-size: 2.2em;
    }
    h2 {
      color: var(--primary-color);
      margin: 40px 0 20px;
      padding-left: 15px;
      border-left: 5px solid var(--accent-color);
      font-size: 1.8em;
    }
    h3 {
      color: var(--accent-color);
      margin: 25px 0 15px;
      font-size: 1.4em;
    }
    .card {
      background: white;
      border-radius: 8px;
      box-shadow: var(--card-shadow);
      padding: 25px;
      margin-bottom: 30px;
    }
    .module-card {
      background: linear-gradient(135deg, #f5f7fa 0%, #e4e8eb 100%);
      border-left: 4px solid var(--primary-color);
      padding: 20px;
      margin-bottom: 20px;
      border-radius: 5px;
    }
    .feature-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
      gap: 20px;
      margin: 20px 0;
    }
    .feature-item {
      background: white;
      padding: 20px;
      border-radius: 8px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.05);
      transition: transform 0.3s, box-shadow 0.3s;
    }
    .feature-item:hover {
      transform: translateY(-5px);
      box-shadow: 0 8px 20px rgba(0,0,0,0.1);
    }
    /*.tree {*/
    /*  font-family: 'Consolas', 'Monaco', monospace;*/
    /*  background: var(--code-bg);*/
    /*  padding: 20px;*/
    /*  border-radius: 5px;*/
    /*  overflow-x: auto;*/
    /*  line-height: 1.5;*/
    /*  margin: 20px 0;*/
    /*}*/


    .tree {
      font-family: 'Courier New', Courier, monospace;
      background-color: #fff;
      border: 1px solid #ddd;
      border-radius: 8px;
      padding: 20px;
      max-width: 800px;
      margin: 0 auto;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    }

    .dir {
      color: #2980b9;
      font-weight: bold;
    }
    .file {
      color: #27ae60;
    }
    .highlight {
      background-color: #fff9c4;
      padding: 2px 5px;
      border-radius: 3px;
      font-weight: 500;
    }
    .tech-features {
      display: flex;
      flex-wrap: wrap;
      gap: 15px;
      margin: 20px 0;
    }
    .tech-item {
      flex: 1 1 200px;
      background: white;
      padding: 15px;
      border-radius: 5px;
      box-shadow: 0 2px 5px rgba(0,0,0,0.05);
    }
    .func-list {
      columns: 2;
      column-gap: 30px;
    }
    .func-item {
      break-inside: avoid;
      margin-bottom: 15px;
      padding: 12px;
      background: rgba(52, 152, 219, 0.08);
      border-radius: 5px;
    }
    .section-title {
      background: linear-gradient(90deg, var(--primary-color), var(--secondary-color));
      color: white;
      padding: 12px 20px;
      border-radius: 5px;
      margin: 30px 0 20px;
      font-size: 1.3em;
    }
    @media (max-width: 768px) {
      .func-list {
        columns: 1;
      }
      .feature-grid {
        grid-template-columns: 1fr;
      }
    }

    /* project-tree */
    /*body {*/
    /*  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;*/
    /*  background-color: #f9f9f9;*/
    /*  color: #333;*/
    /*  margin: 0;*/
    /*  padding: 20px;*/
    /*}*/

    .tree {
      font-family: 'Courier New', Courier, monospace;
      background-color: #fff;
      border: 1px solid #ddd;
      border-radius: 8px;
      padding: 20px;
      /*max-width: 800px;*/
      margin: 0 auto;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    }

    .tree ul {
      list-style-type: none;
      padding-left: 20px;
      margin: 0;
    }

    .tree li {
      position: relative;
      padding: 5px 0;
      cursor: pointer;
      transition: background-color 0.2s;
    }


    /*!* 新增一级目录布局样式 *!*/
    /*.tree > ul {*/
    /*  display: grid;*/
    /*  grid-template-columns: repeat(3, 1fr);*/
    /*  gap: 20px;*/
    /*}*/

    /*.tree ul {*/
    /*  list-style-type: none;*/
    /*  padding-left: 20px;*/
    /*  margin: 0;*/
    /*}*/

    .tree li:hover {
      background-color: #f0f0f0;
    }

    .tree li:before {
      content: "├── ";
      position: absolute;
      left: -15px;
      color: #666;
    }

    .tree li:last-child:before {
      content: "└── ";
    }

    .tree li.collapsed > ul {
      display: none;
    }

    .tree li.collapsed .folder-icon::before {
      content: "▶ ";
      color: #007bff;
    }

    .tree li.expanded .folder-icon::before {
      content: "▼ ";
      color: #007bff;
    }

    .tree .file {
      color: #28a745;
      padding-left: 20px; /* 避免被层级线条遮挡 */
    }

    .tree .folder {
      color: #007bff;
      font-weight: bold;
      padding-left: 20px; /* 避免被层级线条遮挡 */
    }

    .tree .root {
      font-weight: bold;
      color: #333;
      padding-left: 0; /* 根节点不需要缩进 */
    }

    .tree .folder-icon {
      cursor: pointer;
      margin-right: 5px;
    }




  </style>
</head>
<body>
<nav class="navbar">
  <a href="#" class="nav-logo"></a>
  <div class="nav-links">
    <a href="../index.html" class="nav-link">首页</a>
    <a href="./document-center.html" class="nav-link">文档中心</a>
  </div>
</nav>

<h1>infinitest · 极测无界 项目文档</h1>

<div class="card">
  <div class="section-title">项目概述</div>
  <p style="text-indent: 2em;"><code>infinitest · 极测无界 </code> 是一个综合性的 Python 库集合，专为车载系统测试、性能监控、自动化测试和数据分析而设计。该库封装了多种常用功能模块，使开发人员和测试人员能够快速实现各种测试场景，提高测试效率和质量。<code>customLib</code> 提供了丰富的工具和接口，支持从音频处理、CAN 总线通信到性能监控等多种功能，适用于车载系统的开发、测试和验证。</p>
  <p style="text-indent: 2em;"><code>infinitest · 极测无界 </code> 库具备的所有能力，都可以在 <code>automation_cases</code> 工程下的具体业务脚本中去使用。</p>
</div>



<div class="card">
  <div class="section-title">主要功能模块</div>

  <div class="project_structure" id="project_structure">
  </div>


  <div class="module-card" id="CanBusManager">
    <h3>1. 总线模块</h3>
    <p><strong>功能描述</strong>：支持CAN、LIN、CAN FD多种总线协议的的通信，包括消息发送、接收、监控，报文录制等功能。</p>
    <div class="func-list">
      <div class="func-item">
        <strong>核心功能</strong>：
        <ul>
          <li>支持报文id、信号长名、信号短名、16进制数据等多种形式发送总线报文 </li>
          <li>支持CAN、LIN、CAN FD多种总线协议 </li>
          <li>支持录制报文消息</li>
          <li>满足仪表全功能对总线的需求</li>
          <li>车控车设等功能台架环境可实现总线仿真闭环</li>
          <li>适配全平台车型</li>
        </ul>
      </div>
      <div class="func-item">
        <strong>应用场景</strong>：满足车载系统仪表、车控、车设等等模块的功能自动化，及不同测试场景或工况下系统对总线状态的需求；涉及车辆硬按键功能对Lin信号依赖的测试场景。
      </div>
    </div>
  </div>

  <div class="module-card" id="ClusterGeneralManager">
    <h3>2. 仪表功能模块</h3>
    <p><strong>功能描述</strong>：负责 仪表Guage、warning、Taletell、Chime、ADAS模块总线信号的的通信、消息发送、接收、监控等功能。</p>
    <div class="func-list">
      <div class="func-item">
        <strong>核心功能</strong>：
        <ul>
          <li>Guage 车速、档位等信号消息的发送与接收</li>
          <li>可实现对任一 warning 的触发与消除</li>
          <li>可实现对任一Taletell 消息的发与消除</li>
          <li>可实现对任一Chime消息的发与消除</li>
<!--          <li>可实现对任一ADAS消息的发送与接收</li>-->
          <li>自定义组合Guage、Warning、Taletell、Chime、ADAS一个或多个模块，可实现对总线随机压力测试</li>
          <li> ...</li>
        </ul>
      </div>
      <div class="func-item">
        <strong>应用场景</strong>：仪表全功能自动化测试，系统休眠启动循环测试，系统压力测试。
      </div>
    </div>
  </div>



<!--  <div class="module-card" id="linbus">-->
<!--    <h3>5. Lin总线 - lin总线</h3>-->
<!--    <p><strong>功能描述</strong>：车辆Lin信号相关功能仿真。</p>-->
<!--    <div class="func-list">-->
<!--      <div class="func-item">-->
<!--        <strong>核心功能</strong>：-->
<!--        <ul>-->
<!--          <li>Lin信号发送，接收，监控，录制</li>-->
<!--        </ul>-->
<!--      </div>-->
<!--      <div class="func-item">-->
<!--        <strong>应用场景</strong>：车辆硬按键功能自动化测试，以及Lin信号与其他功能的耦合测试场景。-->
<!--      </div>-->
<!--    </div>-->
<!--  </div>-->


  <div class="module-card" id="Loggers">
    <h3>4. 日志模块</h3>
    <p><strong>功能描述</strong>：负责系统常用日志，feature日志，系统日志及性能数据的采集。</p>
    <div class="func-list">
      <div class="func-item">
        <strong>核心功能</strong>：
        <ul>
          <li>对canlog，slog，gmlog，logcat，dlt，serail等common日志抓取实现接口封装;</li>
          <li>对Audio日志、蓝牙日志、Carplay日志、语音导航等Feature日志的抓取实现接口封装;</li>
          <li>对minidump，guestdump，emtrace, coredump等System日志的抓取实现接口封装;</li>
          <li>可根据logcat,serial log 等其他log实时监控系统是否重启等一系列严重bug;</li>
        </ul>
      </div>
      <div class="func-item">
        <strong>应用场景</strong>：功能自动化、性能场景、稳定性压测所有自动化测试过程中，提供自动按需抓取日志的能力；断言关键日志压测低概率严重问题。
      </div>
    </div>
  </div>


  <div class="module-card" id="stress_test">
    <h3>5. 核心功能稳定性压测</h3>
    <p><strong>功能描述</strong>：负责系统常用日志，feature日志，系统日志及性能数据的采集。</p>
    <div class="func-list">
      <div class="func-item">
        <strong>核心功能</strong>：
        <ul>
          <li>对canlog，slog，gmlog，logcat，dlt，serail等common日志抓取实现接口封装;</li>
          <li>对Audio日志、蓝牙日志、Carplay日志、语音导航等Feature日志的抓取实现接口封装;</li>
          <li>对minidump，guestdump，emtrace, coredump等System日志的抓取实现接口封装;</li>
          <li>可根据logcat,serial log 等其他log实时监控系统是否重启等一系列严重bug;</li>
        </ul>
      </div>
      <div class="func-item">
        <strong>应用场景</strong>：功能自动化、性能场景、稳定性压测所有自动化测试过程中，提供自动按需抓取日志的能力；断言关键日志压测低概率严重问题。
      </div>
    </div>
  </div>




  <div class="module-card" id="Performance">
    <h3>6. 性能模块</h3>
    <p><strong>功能描述</strong>：负责系统全门类性能数据的采集，分析模块。</p>
    <div class="func-list">
      <div class="func-item">
        <strong>核心功能</strong>：
        <ul>
          <li>BaseScenarioRunner类是作为场景压测的基类，继承该基类可实现对大多数性能数据的采集</li>
          <li>DmaMemoryChecker类是主要负责对系统dma,memory,npu性能指标进行抓取</li>
          <li>IncTrafficMonitor类是主要负责对系统inc traffic相关性能指标进行抓取</li>
          <li>IoMonitor类是对系统磁盘各重点分区的使用情况进行监控</li>
          <li>MemoryCpuManager类是用于抓取系统cpu,memory性能指标</li>
          <li>MonkeyMonitor类是对安卓使用黑/白名单开始/结束monkey测试能力的封装</li>
          <li>StartupManager类是对安卓应用冷/暖/热启动性能指标测试的封装</li>
          <li>...</li>
        </ul>
      </div>
      <div class="func-item">
        <strong>应用场景</strong>：自动化压测，自动化功能测试，power cycle测试等任一测试场景；生成性能数据报告，直观关注系统性能状态。
      </div>
    </div>
  </div>
</div>

  <div class="module-card" id="Common">
    <h3>4. Common - 通用操作封装</h3>
    <p><strong>功能描述</strong>：对自动化通用操作的封装。</p>
    <div class="func-list">
      <div class="func-item">
        <strong>核心功能</strong>：
        <ul>
          <li>CommandExecutor实现对命令的封装，也可用于截取slog，logcat等</li>
          <li>DeviceUtil用于设备断开、连接等状态管理，检查adb,ssh连接状态</li>
          <li>管理qnx、android录屏功能</li>
          <li>Serial Client用于对串口设备的管理</li>
          <li>TimeUtil对系统时间的获取，格式转换</li>
          <li>FileUtil对文件读写的封装</li>
          <li>VehicleTypeManager对车型、平台类型的封装</li>
        </ul>
      </div>
      <div class="func-item">
        <strong>应用场景</strong>：自动化测试适配兼容性的基础。
      </div>
    </div>
  </div>

  <div class="module-card" id="opencv">
    <h3>7. opencv - 本地摄像头视频(帧)管理模块</h3>
    <p><strong>功能描述</strong>：负责自动化脚本执行过程中对台架屏幕的视频录制。</p>
    <div class="func-list">
      <div class="func-item">
        <strong>核心功能</strong>：
        <ul>
          <li>Camera: 摄像头开始/停止录制视频</li>
          <li>ImageUtils: 图像处理工具类</li>
        </ul>
      </div>
      <div class="func-item">
        <strong>应用场景</strong>：给自动化过程出现的异常行为，提供有效的视频证据，帮助分析系统行为。
      </div>
    </div>
  </div>


  <div class="module-card" id="AudioManager">
    <h3>1. 音频管理模块</h3>
    <p><strong>功能描述</strong>：负责音频文件的录制、播放、特征提取、音频匹配检测等功能。</p>
    <div class="func-list">
      <div class="func-item">
        <strong>核心功能</strong>：
        <ul>
          <li>音频录制与播放</li>
          <li>音频特征提取（如 MFCC）</li>
          <li>音频匹配检测（基于归一化互相关算法）</li>
          <li>音频降噪处理</li>
        </ul>
      </div>
      <div class="func-item">
        <strong>应用场景</strong>：车载音频系统的测试与验证，如语音识别、音频播放质量检测等。
      </div>
    </div>
  </div>

  <div class="module-card" id="CalibrationManager">
    <h3>2. 标定管理模块</h3>
    <p><strong>功能描述</strong>：负责车载系统的标定管理，包括标定值的获取、清理等操作。</p>
    <div class="func-list">
      <div class="func-item">
        <strong>核心功能</strong>：
        <ul>
          <li>获取标定值</li>
          <li>清理标定数据（支持 Android 和 QNX 系统）</li>
        </ul>
      </div>
      <div class="func-item">
        <strong>应用场景</strong>：车载系统的标定管理，确保系统参数的准确性。
      </div>
    </div>
  </div>



<div class="card">
  <div class="section-title">应用场景</div>
  <div class="feature-grid">
    <div class="feature-item">
      <h3>车载系统测试</h3>
      <p>通过 <code>ClusterGeneralManager</code> 、<code>Uiautomator</code> 、<code>AudioManager</code> 和 <code>CanBusManager</code> 等模块，对车载系统的音频、仪表、中控娱乐屏等功能进行测试与验证。</p>
    </div>
    <div class="feature-item">
      <h3>性能监控</h3>
      <p>通过 <code>Performance</code> 模块内置了提供了丰富的能力，可实现对车载系统的性能参数进行监控。</p>
    </div>
    <div class="feature-item">
      <h3>自动化</h3>
      <p>通过 <code>Cluster</code>  和 <code>MonkeyMonitor</code> 模块可实现对系统持续48h,72h稳定性相关验证。</p>
      <p>通过 <code>powercycle</code> 模块可实现对系统启动状态稳定性持续数百次的验证，还可以耦合自定义场景，实现专项问题压测。</p>
      <p>通过 <code>BaseScenarioRunner</code> 类，耦合自定义测试场景，实现专项问题压测 。</p>
    </div>
    <div class="feature-item">
      <h3>云端测试</h3>
      <p>通过 <code>CloudTestManager</code> 模块，实现车载系统的云端测试与验证，确保系统的稳定性和可靠性。</p>
    </div>
    <div class="feature-item">
      <h3>标定管理</h3>
      <p>通过 <code>CalibrationManager</code> 模块，对车载系统的标定数据进行管理，对功能自动化更加友好。</p>
    </div>
  </div>
</div>

<div class="card">
  <div class="section-title">技术特点</div>
  <div class="tech-features">
    <div class="tech-item">
      <h3>模块化设计</h3>
      <p><code>infinitest · 极测无界 项目</code> 采用模块化设计，各功能模块相互独立，便于扩展和维护。</p>
    </div>

    <div class="tech-item">
      <h3>高性价比</h3>
      <p><code>infinitest · 极测无界 项目</code> 总线仿真功能基于Peak CAN硬件定制实现，可使用现有的Pycharm环境进行脚本开发，整体成本低，性价比极高。</p>
    </div>

    <div class="tech-item">
      <h3>高效性</h3>
      <p>通过多线程、异步处理等技术，确保各功能模块的高效运行。</p>
    </div>

    <div class="tech-item">
      <h3>总线仿真能力</h3>
      <p>除了支持仪表所有功能的模拟，还实现了车控车设总线闭环，提升在台架上的功能验证效率</p>
    </div>

    <div class="tech-item">
      <h3>赋能产品</h3>
      <p>完善的log截取能力、高效的问题复现能力，为产品质量保驾护航。</p>
    </div>


    <div class="tech-item">
      <h3>可扩展性</h3>
      <p>支持自定义功能扩展，用户可以根据需求添加新的功能模块。</p>
    </div>

    <div class="tech-item">
      <h3>用户友好</h3>
      <p>新用户使用没有门槛，同时还有全面的开发文档支持用户开发。</p>
    </div>

    <div class="tech-item">
      <h3>跨平台支持</h3>
      <p>支持 Android 和 QNX 等多种车载系统平台。</p>
    </div>

  </div>
</div>

<!--<div class="card">-->
<!--  <div class="section-title">项目结构</div>-->
<!--  <div class="tree" id="tree">-->

<!--  </div>-->
<!--</div>-->
</body>
<script src="../js/echarts.min.js"></script>
<script>
  const jsonData = {
    "customLib": {
      "audio": {
        "type": "dir",
        "path": "audio"
      },
      "calibration": {
        "type": "dir",
        "path": "calibration"
      },
      "canbus": {
        "type": "dir",
        "path": "canbus"
      },
      "cluster": {
        "type": "dir",
        "path": "cluster"
      },
      "common": {
        "type": "dir",
        "path": "common"
      },
      "docs": {
        "type": "dir",
        "path": "docs"
      },
      "linbus": {
        "type": "dir",
        "path": "linbus"
      },
      "locators": {
        "type": "dir",
        "path": "locators"
      },
      "loggers": {
        "type": "dir",
        "path": "loggers"
      },
      "opencv": {
        "type": "dir",
        "path": "opencv"
      },
      "pages": {
        "type": "dir",
        "path": "pages"
      },
      "performance": {
        "type": "dir",
        "path": "performance"
      },
      "powercycle": {
        "type": "dir",
        "path": "powercycle"
      },
      "shell": {
        "type": "dir",
        "path": "shell"
      },
      "uiautomator": {
        "type": "dir",
        "path": "uiautomator"
      }
    }
  };

  // function renderTree(data, parentElement) {
  //   const ul = document.createElement('ul');
  //   for (const key in data) {
  //     const li = document.createElement('li');
  //     if (data[key].type === 'file') {
  //       li.textContent = key;
  //       li.classList.add('file');
  //     } else if (typeof data[key] === 'object') {
  //       li.classList.add('folder', 'expanded'); // 默认添加 expanded 类
  //       const folderIcon = document.createElement('span');
  //       folderIcon.classList.add('folder-icon');
  //       const folderName = document.createElement('span');
  //       folderName.textContent = key;
  //       li.appendChild(folderIcon);
  //       li.appendChild(folderName);
  //       const toggleFolder = () => {
  //         li.classList.toggle('collapsed');
  //         li.classList.toggle('expanded');
  //       };
  //       folderIcon.addEventListener('click', (e) => {
  //         e.stopPropagation();
  //         toggleFolder();
  //       });
  //       folderName.addEventListener('click', (e) => {
  //         e.stopPropagation();
  //         toggleFolder();
  //       });
  //       renderTree(data[key], li);
  //       // 移除 li.classList.add('collapsed'); 这行代码
  //     }
  //     ul.appendChild(li);
  //   }
  //   parentElement.appendChild(ul);
  // }
  //
  // function buildTreeStructure(data) {
  //   const root = document.createElement('div');
  //   root.textContent = '└── customLib';
  //   root.classList.add('root');
  //   renderTree(data.customLib, root);
  //   return root;
  // }
  //
  // const treeContainer = document.getElementById('tree');
  // treeContainer.appendChild(buildTreeStructure(jsonData));
  //



  // 将 JSON 数据转换为 ECharts 所需的树形结构
  function convertToTreeData(data) {
    const root = {
      name: 'customLib',
      children: []
    };

    function processNode(currentNode, data) {
      for (const key in data) {
        if (data[key].type === 'file') {
          currentNode.children.push({
            name: key,
            value: data[key].path
          });
        } else if (typeof data[key] === 'object') {
          const newNode = {
            name: key,
            children: []
          };
          currentNode.children.push(newNode);
          processNode(newNode, data[key]);
        }
      }
    }

    processNode(root, data.customLib);
    return root;
  }

  // 初始化 ECharts 实例
  // const chartDom = document.createElement('div');
  const chartDom = document.getElementById('project_structure');
  chartDom.style.width = '1150px';
  chartDom.style.height = '400px';
  // document.body.appendChild(chartDom);
  const myChart = echarts.init(chartDom);


  const option = {
    tooltip: {
      trigger: 'item',
      triggerOn: 'mousemove'
    },
    series: [
      {
        type: 'tree',
        data: [convertToTreeData(jsonData)],
        top: '1%',
        left: '7%',
        bottom: '1%',
        right: '20%',
        symbolSize: 10,
        orient: 'LR', // 从左到右布局
        label: {
          position: 'left',
          verticalAlign: 'middle',
          align: 'right',
          fontSize: 12
        },
        leaves: {
          label: {
            position: 'right',
            verticalAlign: 'middle',
            align: 'left'
          }
        },
        expandAndCollapse: true,
        animationDuration: 550,
        animationDurationUpdate: 750,
        itemStyle: {
          color: '#007bff',
          borderColor: '#0056b3',
          borderWidth: 1
        },
        lineStyle: {
          color: '#666',
          width: 1,
          curveness: 0.5 // 增加 curveness 值，使线条变为折线
        },
        layout: {
          verticalGap: 100,
          horizontalGap: 20
        }
      }
    ]
  };
  // 渲染图表
  myChart.setOption(option);




</script>


</html>